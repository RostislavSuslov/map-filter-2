const userArr = [{
        id: 1,
        name: "Mark Zuckerberg",
        age: 38,
        photo: 'img/photo-MarkZuckerberg.png',
        gender: 'male',
        place: 'White-Plains, New York, USA'
    },
    {
        id: 2,
        name: "Claire Boucher",
        age: 35,
        photo: 'img/photo-ClaireBoucher.png',
        gender: 'female',
        place: 'Vancouver, British Columbia, Canada',
    },
    {
        id: 3,
        name: "Ty Simpkins",
        age: 21,
        photo: 'img/photo-TySimpkins.png',
        gender: 'male',
        place: 'New York City, USA',
    },
    {
        id: 4,
        name: "Tom Holland",
        age: 26,
        photo: 'img/photo-TomHolland.png',
        gender: 'male',
        place: 'London, England',
    },
    {
        id: 5,
        name: "Bill Gates",
        age: 67,
        photo: 'img/photo-BillGates.png',
        gender: 'male',
        place: 'Seattle, Washington, USA',
    },
    {
        id: 6,
        name: "Elon Musk",
        age: 51,
        photo: 'img/photo-ElonMusk.png',
        gender: 'male',
        place: 'Pretoria, South Africa',
    },
    {
        id: 7,
        name: "Talulah Jane",
        age: 37,
        photo: 'img/photo-TalulahJane.png',
        gender: 'female',
        place: 'Hertford, Hertfordshire, England',
    },
    {
        id: 8,
        name: "Bernard Arnault",
        age: 74,
        photo: 'img/photo-BernardArnault.png',
        gender: 'male',
        place: 'Roubaix, France',
    },
    {
        id: 9,
        name: "Jeff Bezos",
        age: 59,
        photo: 'img/photo-JeffBezos.png',
        gender: 'male',
        place: 'Albuquerque, New Mexico, USA',
    },
    {
        id: 10,
        name: "Tosca Musk",
        age: 48,
        photo: 'img/photo-ToscaMusk.png',
        gender: 'female',
        place: 'Pretoria, South Africa',
    },
    {
        id: 11,
        name: "Steve Jobs",
        age: 56,
        photo: 'img/photo-SteveJobs.png',
        gender: 'male',
        place: 'San Francisco, California, USA',
    },
    {
        id: 12,
        name: "Amber Heard",
        age: 36,
        photo: 'img/photo-AmberHeard.png',
        gender: 'female',
        place: 'Austin, Texas, USA',
    },
    {
        id: 13,
        name: "Laurene Powell",
        age: 59,
        photo: 'img/photo-LaurenePowell.png',
        gender: 'female',
        place: '',
    },
    {
        id: 14,
        name: "Eve Jobs",
        age: 24,
        photo: 'img/photo-EveJobs.png',
        gender: 'female',
        place: '',
    },
    {
        id: 15,
        name: "Chrisann Brennan",
        age: 68,
        photo: 'img/photo-ChrisannBrennan.png',
        gender: 'female',
        place: '',
    },
    {
        id: 16,
        name: "Cara Delevingne",
        age: 30,
        photo: 'img/photo-CaraDelevingne.png',
        gender: 'female',
        place: '',
    },
    {
        id: 17,
        name: "Cam Gigandet",
        age: 40,
        photo: 'img/photo-CamGigandet.png',
        gender: 'male',
        place: '',
    },
    {
        id: 18,
        name: "Sean Faris",
        age: 41,
        photo: 'img/photo-SeanFaris.png',
        gender: 'male',
        place: '',
    },
    {
        id: 19,
        name: "Penn Badgley",
        age: 41,
        photo: 'img/photo-PennBadgley.png',
        gender: 'male',
        place: '',
    },
    {
        id: 20,
        name: "Camille Vasquez",
        age: 38,
        photo: 'img/photo-CamilleVasquez.png',
        gender: 'female',
        place: '',
    },
    {
        id: 21,
        name: "Margot Robbie",
        age: 32,
        photo: 'img/photo-MargotRobbie.png',
        gender: 'female',
        place: '',
    },
    {
        id: 22,
        name: "Scarlett Johansson",
        age: 38,
        photo: 'img/photo-ScarlettJohansson.png',
        gender: 'female',
        place: '',
    },
    {
        id: 23,
        name: "Angelina Jolie",
        age: 47,
        photo: 'img/photo-AngelinaJolie.png',
        gender: 'female',
        place: '',
    },
    {
        id: 24,
        name: "Gal Gadot",
        age: 37,
        photo: 'img/photo-GalGadot.png',
        gender: 'female',
        place: '',
    },
    {
        id: 25,
        name: "Vito Schnabel",
        age: 36,
        photo: 'img/photo-VitoSchnabel.png',
        gender: 'male',
        place: '',
    },
    {
        id: 26,
        name: "Dylan Minnette",
        age: 26,
        photo: 'img/photo-DylanMinnette.png',
        gender: 'male',
        place: '',
    },
    {
        id: 27,
        name: "Ansel Elgort",
        age: 29,
        photo: 'img/photo-AnselElgort.png',
        gender: 'male',
        place: '',
    },
    {
        id: 28,
        name: "Timothée Chalamet",
        age: 27,
        photo: 'img/photo-TimothéeChalame.png',
        gender: 'male',
        place: '',
    },
    {
        id: 29,
        name: "Josh Hutcherson",
        age: 30,
        photo: 'img/photo-JoshHutcherson.png',
        gender: 'male',
        place: '',
    },
    {
        id: 30,
        name: "Aimee Wood",
        age: 29,
        photo: 'img/photo-AimeeWood.png',
        gender: 'female',
        place: '',
    },
    {
        id: 31,
        name: "Chloë Moretz",
        age: 26,
        photo: 'img/photo-ChloëMoretz.png',
        gender: 'female',
        place: '',
    },
    {
        id: 32,
        name: "Mimi Keene",
        age: 24,
        photo: 'img/photo-MimiKeene.png',
        gender: 'female',
        place: '',
    },
    {
        id: 33,
        name: "Elle Fanning",
        age: 25,
        photo: 'img/photo-ElleFanning.png',
        gender: 'female',
        place: '',
    },
    {
        id: 34,
        name: "Dakota Fanning",
        age: 29,
        photo: 'img/photo-DakotaFanning.png',
        gender: 'female',
        place: '',
    },
    {
        id: 35,
        name: "Justice Smith",
        age: 27,
        photo: 'img/photo-JusticeSmith.png',
        gender: 'male',
        place: '',
    },
    {
        id: 36,
        name: "Isabella Sermon",
        age: 16,
        photo: 'img/photo-IsabellaSermon.png',
        gender: 'female',
        place: '',
    },
    {
        id: 37,
        name: "Omar Sy",
        age: 45,
        photo: 'img/photo-OmarSy.png',
        gender: 'male',
        place: '',
    },
]

const ageFilterInput = document.querySelector('#ageFilter');
const genderFilterInputs = document.querySelectorAll('input[type=radio]');
const peopleContainer = document.querySelector('.users-container');

window.addEventListener('load', function () {

    const ageFilterInput = document.querySelector('#ageFilter');
    const peopleContainer = document.querySelector('.users-container');
    const genderFilterInputs = document.querySelectorAll('input[type=radio]');

    const renderTemplate = (users) => {
        const list = users.map(person => {
            return (`
                <div class="user">
                <div class="person-photo">
                <img src="${person.photo}" class="img-fluid" alt="${person.id}"></div>
                <div class="person-name">${person.name}</div>
                <div class="person-age">${person.age}</div>
                <div class="person-gender">${person.gender}</div>
            </div>
            `)
        }).join("")

        peopleContainer.innerHTML = list
    }

    //корзина
    let filtered = [];

    //начальное состояние
    let initialState = {
        age: 30,
        gender: 'all'
    }

    const firstUsersByInitialState = userArr.filter(user => user.age <= initialState.age)
    renderTemplate(firstUsersByInitialState)

    ageFilterInput.addEventListener('click', ({target}) => {
        const age = target.value; // value инпута по которому кликнул
        console.log(age);
        initialState.age = parseInt(age); //  //начальное состояние меняет age = value
        /*parseInt преобразует строку в целое число.*/
        if (initialState.gender === 'all') { // если все гендеры
            filtered = userArr.filter(user => user.age <= initialState.age) // то фильтруем по возрасту

            renderTemplate(filtered) // рендерим

            return null // завершаем работу функции, дальше не идет выполение этой функции
        }

        // если гендер не all
        filtered = userArr.filter(person => {
            return person.age <= initialState.age && person.gender === initialState.gender //фильтрует по возрасту и гендеру, 
            //гендер записывается по клику на чекбокс ниже в функции
        })

        renderTemplate(filtered) // рендерим
    })

    genderFilterInputs.forEach(input => {
        input.addEventListener('click', (e) => {
            const val = e.target.value // value чекбокса //
            console.log(val);
            initialState.gender = val; // Перезаписываем в начальное состояние

            if (initialState.gender === 'all') { // если весь гендер
                filtered = userArr.filter(user => { // фильтруем по возрасту
                    if (user.age <= initialState.age) { // фильтруем по возрасту
                        return user // фильтруем по возрасту
                    } // фильтруем по возрасту
                }) // фильтруем по возрасту

                renderTemplate(filtered) // рендерим

                return null; // прекращаем выполнение функции, дальше она не выполняется
            }

            //если гендер не all
            filtered = userArr.filter(user => {
                if (user.gender === initialState.gender && (user.age <= initialState.age)) { // фильтруем по гендеру и по возрасту
                    return user
                }
            })

            renderTemplate(filtered) // рендерим
        });
    });
})